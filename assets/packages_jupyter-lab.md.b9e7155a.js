import{_ as s,c as a,o as n,a as p}from"./app.813d7974.js";const C=JSON.parse('{"title":"Jupyter Lab","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u5728 CentOS \u4E0A\u5B89\u88C5 JupyterLab","slug":"\u5728-centos-\u4E0A\u5B89\u88C5-jupyterlab"},{"level":3,"title":"\u5B89\u88C5","slug":"\u5B89\u88C5"},{"level":3,"title":"\u751F\u6210\u8BBF\u95EE\u5BC6\u7801","slug":"\u751F\u6210\u8BBF\u95EE\u5BC6\u7801"},{"level":3,"title":"\u751F\u6210\u914D\u7F6E\u6587\u4EF6","slug":"\u751F\u6210\u914D\u7F6E\u6587\u4EF6"},{"level":3,"title":"\u6587\u4EF6\u672B\u5C3E\u6DFB\u52A0\u914D\u7F6E\u5185\u5BB9","slug":"\u6587\u4EF6\u672B\u5C3E\u6DFB\u52A0\u914D\u7F6E\u5185\u5BB9"},{"level":3,"title":"\u6DFB\u52A0Nginx\u914D\u7F6E","slug":"\u6DFB\u52A0nginx\u914D\u7F6E"},{"level":3,"title":"\u5F00\u673A\u81EA\u542F","slug":"\u5F00\u673A\u81EA\u542F"},{"level":3,"title":"Supervisor \u5B88\u62A4\u8FDB\u7A0B","slug":"supervisor-\u5B88\u62A4\u8FDB\u7A0B"},{"level":2,"title":"\u65E0\u6CD5\u4F7F\u7528\u5F02\u6B65io","slug":"\u65E0\u6CD5\u4F7F\u7528\u5F02\u6B65io"}],"relativePath":"packages/jupyter-lab.md","lastUpdated":1660410036000}'),l={name:"packages/jupyter-lab.md"},o=p(`<h1 id="jupyter-lab" tabindex="-1">Jupyter Lab <a class="header-anchor" href="#jupyter-lab" aria-hidden="true">#</a></h1><h2 id="\u5728-centos-\u4E0A\u5B89\u88C5-jupyterlab" tabindex="-1">\u5728 CentOS \u4E0A\u5B89\u88C5 JupyterLab <a class="header-anchor" href="#\u5728-centos-\u4E0A\u5B89\u88C5-jupyterlab" aria-hidden="true">#</a></h2><p>Jupyter \u80FD\u5B9E\u73B0\u968F\u65F6\u968F\u5730\u5728\u6D4F\u89C8\u5668\u4E0A\u8FDB\u884C Python \u5904\u7406\u6570\u636E\u7B49\u7A0B\u5E8F\u3002</p><p>JupyterLab \u662F\u4E00\u4E2A Web \u5E94\u7528\uFF0C\u80FD\u8BA9\u7528\u6237\u5C06\u8BF4\u660E\u6587\u672C\u3001\u6570\u5B66\u65B9\u7A0B\u3001\u4EE3\u7801\u548C\u53EF\u89C6\u5316\u5185\u5BB9\u5168\u90E8\u7EC4\u5408\u5230\u4E00\u4E2A\u6613\u4E8E\u5171\u4EAB\u7684\u6587\u6863\u4E2D\u3002</p><p>\u4E0E\u5E38\u89C4\u7684 py \u6587\u4EF6\u4E0D\u540C\u7684\u662F\uFF0CJupyterLab \u4E3B\u8981\u8FD0\u884C\u7684\u662F ipython\uFF0Cipython \u662F\u4E00\u4E2A python \u7684\u4EA4\u4E92\u5F0F shell \uFF0C\u975E\u5E38\u9002\u5408\u8FDB\u884C\u79D1\u5B66\u8BA1\u7B97\u548C\u4EA4\u4E92\u53EF\u89C6\u5316\u3002</p><h3 id="\u5B89\u88C5" tabindex="-1">\u5B89\u88C5 <a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">pip install jupyterlab</span></span>
<span class="line"></span></code></pre></div><h3 id="\u751F\u6210\u8BBF\u95EE\u5BC6\u7801" tabindex="-1">\u751F\u6210\u8BBF\u95EE\u5BC6\u7801 <a class="header-anchor" href="#\u751F\u6210\u8BBF\u95EE\u5BC6\u7801" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ipython </span><span style="color:#676E95;font-style:italic;"># 1.\u8F93\u5165\u547D\u4EE4\u8FDB\u5165 ipython \u7EC8\u7AEF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2. \u8F93\u5165\u4E0B\u5217\u5185\u5BB9</span></span>
<span class="line"><span style="color:#A6ACCD;">from notebook.auth import passwd</span></span>
<span class="line"><span style="color:#82AAFF;">passwd</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3. \u8F93\u5165\u8BBF\u95EE\u5BC6\u7801\uFF0C\u5E76\u8BB0\u5F55\u4E0B\u52A0\u5BC6\u5B57\u7B26\u4E32\uFF0C\u9700\u8981\u5728\u540E\u9762\u914D\u7F6E</span></span>
<span class="line"></span></code></pre></div><h3 id="\u751F\u6210\u914D\u7F6E\u6587\u4EF6" tabindex="-1">\u751F\u6210\u914D\u7F6E\u6587\u4EF6 <a class="header-anchor" href="#\u751F\u6210\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">jupyter-lab --generate-config</span></span>
<span class="line"></span></code></pre></div><p>\u4E00\u822C\u4F1A\u751F\u6210\u914D\u7F6E\u6587\u4EF6\u5728 <code>/home/USERNAME/.jupyter/jupyter_lab_config.py</code>\uFF0C\u5176\u4E2D <code>USERNAME</code> \u4E3A\u5F53\u524D\u767B\u5F55\u7528\u6237\u540D\u3002</p><h3 id="\u6587\u4EF6\u672B\u5C3E\u6DFB\u52A0\u914D\u7F6E\u5185\u5BB9" tabindex="-1">\u6587\u4EF6\u672B\u5C3E\u6DFB\u52A0\u914D\u7F6E\u5185\u5BB9 <a class="header-anchor" href="#\u6587\u4EF6\u672B\u5C3E\u6DFB\u52A0\u914D\u7F6E\u5185\u5BB9" aria-hidden="true">#</a></h3><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">c.ServerApp.ip = &#39;*&#39; # \u6240\u6709\u7ED1\u5B9A\u670D\u52A1\u5668\u7684IP\u90FD\u80FD\u8BBF\u95EE\uFF0C\u82E5\u60F3\u53EA\u5728\u7279\u5B9Aip\u8BBF\u95EE\uFF0C\u8F93\u5165ip\u5730\u5740\u5373\u53EF</span></span>
<span class="line"><span style="color:#A6ACCD;">c.ServerApp.port = 18889 # \u5C06\u7AEF\u53E3\u8BBE\u7F6E\u4E3A\u81EA\u5DF1\u559C\u6B22\u7684\u5427\uFF0C\u9ED8\u8BA4\u662F0</span></span>
<span class="line"><span style="color:#A6ACCD;">c.LabServerApp.open_browser = False # \u6211\u4EEC\u5E76\u4E0D\u60F3\u5728\u670D\u52A1\u5668\u4E0A\u76F4\u63A5\u6253\u5F00Jupyter Notebook\uFF0C\u6240\u4EE5\u8BBE\u7F6E\u6210False</span></span>
<span class="line"><span style="color:#A6ACCD;">c.ServerApp.root_dir = &quot;/var/www/codes/python-projects/jupyter-lab/&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">c.ServerApp.allow_root = False</span></span>
<span class="line"><span style="color:#A6ACCD;">c.ServerApp.password = &#39;&#39; # \u8FDB\u5165\u5230 python\u6216\u8005ipython\u91CC\u6267\u884C\uFF1A\`from jupyter_server.auth import passwd; passwd()\`</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u6DFB\u52A0nginx\u914D\u7F6E" tabindex="-1">\u6DFB\u52A0Nginx\u914D\u7F6E <a class="header-anchor" href="#\u6DFB\u52A0nginx\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">jupyter </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:18889; </span><span style="color:#676E95;font-style:italic;"># \u4E3B\u673A\u7AEF\u53E3\uFF0C\u5BF9\u5E94\u914D\u7F6E\u6587\u4EF6 \`/home/USERNAME/.jupyter/jupyter_lab_config.py\` \u4E2D\u7684\u7AEF\u53E3\u53F7</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">80 </span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u76D1\u542C 80 \u7AEF\u53E3\uFF0C\u8FD9\u91CC\u6CE8\u610F\u4E0D\u8981\u548C jupyter \u7AEF\u53E3\u4E00\u81F4</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> gzip </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">jupyter.DOMAIN.com</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># \u4FEE\u6539\u4E3A\u81EA\u5DF1\u7684\u57DF\u540D</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> access_log </span><span style="color:#A6ACCD;">/var/log/nginx/jupyter.DOMAIN.com_access.log</span><span style="color:#89DDFF;"> main;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> error_log </span><span style="color:#A6ACCD;"> /var/log/nginx/jupyter.DOMAIN.com_error.log</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://jupyter</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># \u8BBE\u7F6E\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u8BF7\u6C42\u53D1\u9001</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;"> Host                </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;"> X-Real-IP           </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;"> X-Forwarded-Ssl    </span><span style="color:#89DDFF;"> on;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;"> X-Forwarded-For     </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># \u4F7F\u5F97Nginx\u652F\u6301websocket</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_http_version </span><span style="color:#A6ACCD;">1.1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">Upgrade </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_upgrade</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">Connection </span><span style="color:#C3E88D;">&quot;upgrade&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;"> X-Forwarded-Proto   </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">scheme</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;"> X-Frame-Options     SAMEORIGIN</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> client_max_body_size </span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">100m</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> client_body_buffer_size </span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">128k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_buffer_size </span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">4k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_buffers </span><span style="color:#A6ACCD;">              </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">32k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_busy_buffers_size </span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">64k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_temp_file_write_size </span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">64k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5F00\u673A\u81EA\u542F" tabindex="-1">\u5F00\u673A\u81EA\u542F <a class="header-anchor" href="#\u5F00\u673A\u81EA\u542F" aria-hidden="true">#</a></h3><p>\u4F7F\u7528\u4E0B\u9762\u7684\u811A\u672C\u53EF\u4EE5\u5B9E\u73B0\u5F00\u673A\u81EA\u542F</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[Unit]</span></span>
<span class="line"><span style="color:#C3E88D;">Description=Jupyter Lab</span></span>
<span class="line"><span style="color:#C3E88D;">After=network.target</span></span>
<span class="line"><span style="color:#C3E88D;">[Service]</span></span>
<span class="line"><span style="color:#C3E88D;">Type=simple</span></span>
<span class="line"><span style="color:#C3E88D;">ExecStart=/var/www/codes/python-projects/venv/bin/python /var/www/codes/python-projects/venv/bin/jupyter-lab --config=/home/USERNAME/.jupyter/jupyter_lab_config.py</span></span>
<span class="line"><span style="color:#C3E88D;">User=USERNAME</span></span>
<span class="line"><span style="color:#C3E88D;">Group=GROUP_USERNAME</span></span>
<span class="line"><span style="color:#C3E88D;">WorkingDirectory=/var/www/codes/python-projects/jupyter-lab</span></span>
<span class="line"><span style="color:#C3E88D;"># \u6587\u4EF6\u8DEF\u5F84\u540D</span></span>
<span class="line"><span style="color:#C3E88D;">Restart=always</span></span>
<span class="line"><span style="color:#C3E88D;">RestartSec=10</span></span>
<span class="line"><span style="color:#C3E88D;">[Install]</span></span>
<span class="line"><span style="color:#C3E88D;">WantedBy=multi-user.target</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> /etc/systemd/system/jupyter.service</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u5C06 <code>USERNAME</code> \u4FEE\u6539\u4E3A\u5F53\u524D\u8FD0\u884C\u7684\u7528\u6237, <code>GROUP_USERNAME</code> \u4FEE\u6539\u4E3Aweb\u670D\u52A1\u5668\u8FD0\u884C\u7528\u6237\uFF0C\u6BD4\u5982 nginx\u3002</p></blockquote><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">systemctl </span><span style="color:#82AAFF;">enable</span><span style="color:#A6ACCD;"> jupyter </span><span style="color:#676E95;font-style:italic;">#\u8BBE\u7F6E\u5F00\u673A\u81EA\u542F</span></span>
<span class="line"><span style="color:#A6ACCD;">systemctl start jupyter </span><span style="color:#676E95;font-style:italic;">#\u542F\u52A8</span></span>
<span class="line"></span></code></pre></div><h3 id="supervisor-\u5B88\u62A4\u8FDB\u7A0B" tabindex="-1">Supervisor \u5B88\u62A4\u8FDB\u7A0B <a class="header-anchor" href="#supervisor-\u5B88\u62A4\u8FDB\u7A0B" aria-hidden="true">#</a></h3><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">program:jupyter-lab</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">directory=/var/www/codes/python-projects/jupyter-lab</span></span>
<span class="line"><span style="color:#A6ACCD;">command=/bin/bash -E -c /shell-path/run-jupyter-lab.sh</span></span>
<span class="line"><span style="color:#A6ACCD;">autostart=true</span></span>
<span class="line"><span style="color:#A6ACCD;">autorestart=true</span></span>
<span class="line"><span style="color:#A6ACCD;">stopsignal=INT</span></span>
<span class="line"><span style="color:#A6ACCD;">stopasgroup=true</span></span>
<span class="line"><span style="color:#A6ACCD;">killasgroup=true</span></span>
<span class="line"><span style="color:#A6ACCD;">user=USERNAME</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u5C06 <code>USERNAME</code> \u4FEE\u6539\u4E3A\u5F53\u524D\u8FD0\u884C\u7684\u7528\u6237\u3002</p></blockquote><h4 id="run-jupyter-lab-sh" tabindex="-1"><a href="http://run-jupyter-lab.sh" target="_blank" rel="noopener noreferrer">run-jupyter-lab.sh</a> <a class="header-anchor" href="#run-jupyter-lab-sh" aria-hidden="true">#</a></h4><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">/var/www/codes/python-projects/venv/bin/python /var/www/codes/python-projects/venv/bin/jupyter-lab --config=/home/USERNAME/.jupyter/jupyter_lab_config.py</span></span>
<span class="line"></span></code></pre></div><h4 id="\u91CD\u542F-supervisor" tabindex="-1">\u91CD\u542F Supervisor <a class="header-anchor" href="#\u91CD\u542F-supervisor" aria-hidden="true">#</a></h4><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl restart supervisor.service</span></span>
<span class="line"></span></code></pre></div><h2 id="\u65E0\u6CD5\u4F7F\u7528\u5F02\u6B65io" tabindex="-1">\u65E0\u6CD5\u4F7F\u7528\u5F02\u6B65io <a class="header-anchor" href="#\u65E0\u6CD5\u4F7F\u7528\u5F02\u6B65io" aria-hidden="true">#</a></h2><p>\u5F53\u6211\u4EEC\u5728\u4F7F\u7528 JupyterLab \u4E2D\u6309\u7167\u6B63\u5E38\u7684\u65B9\u5F0F\u7F16\u5199\u5F02\u6B65io\u903B\u8F91\u65F6\u4F1A\u629B\u51FA\uFF1A<code>RuntimeError: asyncio.run() cannot be called from a running event loop</code> \u9519\u8BEF\u3002\u6BD4\u5982\uFF1A</p><div class="language-python"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> asyncio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span></code></pre></div><p>\u4EE5\u4E0A\u4EE3\u7801\u903B\u8F91\u5728 Jupyter Lab \u4E2D\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C\u3002</p><p>\u89E3\u51B3\u65B9\u6CD5\u4E00\uFF1A</p><div class="language-python"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> asyncio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u8BE6\u60C5\u67E5\u770B\u8FD9\u91CC\uFF0C<a href="https://stackoverflow.com/questions/55409641/asyncio-run-cannot-be-called-from-a-running-event-loop" target="_blank" rel="noopener noreferrer">asyncio.run() cannot be called from a running event loop</a></p></blockquote><p>\u89E3\u51B3\u65B9\u6CD5\u4E8C\uFF1A</p><div class="language-python"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> asyncio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    loop </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_event_loop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    loop</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create_task</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u8BE6\u60C5\u67E5\u770B\u8FD9\u91CC, <a href="https://nocomplexity.com/documents/jupyterlab/tip-asyncio.html" target="_blank" rel="noopener noreferrer">Running asyncio</a></p></blockquote><p>\u89E3\u51B3\u65B9\u6CD5\u4E09\uFF0C\u4E0D\u63A8\u8350\uFF1A</p><div class="language-python"><span class="copy"></span><div class="highlight-lines"><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> asyncio</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> nest_asyncio</span></span>
<span class="line"><span style="color:#A6ACCD;">nest_asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span></code></pre></div>`,40),e=[o];function r(c,t,y,D,i,F){return n(),a("div",null,e)}var d=s(l,[["render",r]]);export{C as __pageData,d as default};
